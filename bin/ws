WORKSPACE_DIR=$HOME/src

if [ -d $WORKSPACE_DIR/$1 ]; then
  PROJECT_DIR=$WORKSPACE_DIR/$1
  WINDOW_NAME=$1
elif [ -d $WORKSPACE_DIR/_ext/$2 ]; then
  PROJECT_DIR=$WORKSPACE_DIR/_ext/$1
  WINDOW_NAME=$1
else
  echo project not found: $1
  exit
fi

if [ -h $PROJECT_DIR ]; then
  WINDOW_NAME=$(readlink $PROJECT_DIR)
else
  WINDOW_NAME=$1
fi

tmux rename-window $WINDOW_NAME

tmux split-window -p 20

tmux send-keys -t 0 "cd $PROJECT_DIR"
tmux send-keys -t 0 Enter
tmux send-keys -t 0 "vim ."
tmux send-keys -t 0 Enter

tmux send-keys -t 1 "cd $PROJECT_DIR"
tmux send-keys -t 1 Enter
tmux send-keys -t 1 "clear"
tmux send-keys -t 1 Enter

tmux select-pane -t 0

